<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<f:view
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:pr="http://primefaces.org/ui"
    contentType="text/html"
    locale="#{localeView.locale}">
   
   <html>
		<h:head>
			<meta charset="utf-8" />
			<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		
			<title><h:outputText value="#{loginView.nomeApp}" /></title>
		
			<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
			
			<link rel="stylesheet" type="text/css" href="#{request.contextPath}/public/template/assets/css/vendor.css" />
			<link rel="stylesheet" type="text/css" href="#{request.contextPath}/public/template/assets/css/flat-admin.css" />
			
			<link rel="stylesheet" type="text/css" href="#{request.contextPath}/public/template/assets/css/primefaces.css" />
			
		  	<!-- Tema -->
		  	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/public/template/assets/css/theme/blue-sky.css" />
			<link rel="icon" href="#{loginView.icon}" />
			
		</h:head>
		
		<body>
  			<div class="app app-default">

				<div class="app-container app-login" style="background-color: #f6d200 !important;">
  					<div class="flex-center">
    					<div class="app-header"></div>
    					<div class="app-body">
      						<div class="loader-container text-center">
          						<div class="icon">
            						<div class="sk-folding-cube">
                						<div class="sk-cube1 sk-cube"></div>
						                <div class="sk-cube2 sk-cube"></div>
						                <div class="sk-cube4 sk-cube"></div>
						                <div class="sk-cube3 sk-cube"></div>
              						</div>
            					</div>
          						<div class="title">Carregando</div>
      						</div>
      						<div class="app-block">
      							<div class="app-form">
        							<div class="form-header">
          								<div class="app-brand" style="clear: both;">
          									<img clas="profile-img" src="#{loginView.logoLogin}" style="width: 220px;" />
          								</div>
        							</div>
       								<h:messages style="clear: both; width: 100%; text-align: center; height: 50px; font-weight: bold; color: red; padding-left: 0px; clear: both; list-style-type: none; list-style-position: outside; font-size: 90%;" />
        							<h:form id="formLogin" prependId="false">
        								
        								<h:inputHidden id="hashTrocaSenha" value="#{loginView.hashTrocaSenha}" />
        								
           								<label>Nova Senha:</label>
            							<div class="input-group">
              								<span class="input-group-addon" id="basic-addon1">
                								<i class="fa fa-user" aria-hidden="true"></i>
                							</span>
                							<h:inputSecret required="true" value="#{loginView.novaSenha}" styleClass="form-control" label="Nova Senha">
                								<f:passThroughAttribute name="placeholder" value="Nova Senha" />
                							</h:inputSecret>
            							</div>
            							<label>Confirmação da Nova Senha:</label>
            							<div class="input-group">
              								<span class="input-group-addon" id="basic-addon1">
                								<i class="fa fa-user" aria-hidden="true"></i>
                							</span>
                							<h:inputSecret required="true" value="#{loginView.confirmacaoNovaSenha}" styleClass="form-control" label="Confirmação da Nova Senha">
                								<f:passThroughAttribute name="placeholder" value="Confirmação da Nova Senha" />
                							</h:inputSecret>
            							</div>
							            <div class="text-center">
							            	<h:commandLink id="novaSenha" styleClass="btn btn-primary btn-submit" style="margin-top: 10px;" action="#{loginView.trocarSenha()}" value="Solicitar Troca de Senha" />
            							</div>
        							</h:form>
      							</div>
   							</div>
    					</div>
    					<div class="app-footer">
    					</div>
  					</div>
				</div>
			</div>
	    </body>
	    
	    <!-- Arquivos Javascript -->
	    <script type="text/javascript" src="#{request.contextPath}/public/template/assets/js/vendor.min.js"></script>
		<script type="text/javascript" src="#{request.contextPath}/public/template/assets/js/app.min.js"></script>
		<script>
			//<![CDATA[	
			$( document ).ready(function() {
				var hashTrocaSenha = getUrlParameter("hashTrocaSenha");
				$("#hashTrocaSenha").val(hashTrocaSenha);
				if (hashTrocaSenha == null || hashTrocaSenha == '') {
					alert("Acesso indevido ou incorreto.");
					window.location = "login.jsf";
				}
			});
			
			var getUrlParameter = function getUrlParameter(sParam) {
			    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
			        sURLVariables = sPageURL.split('&'),
			        sParameterName,
			        i;

			    for (i = 0; i < sURLVariables.length; i++) {
			        sParameterName = sURLVariables[i].split('=');

			        if (sParameterName[0] === sParam) {
			            return sParameterName[1] === undefined ? true : sParameterName[1];
			        }
			    }
			};
			//]]>
		</script>
		
	</html>
	
</f:view>